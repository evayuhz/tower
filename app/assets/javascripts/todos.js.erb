$(document).on("page:change",function(){
  $('.todo_checkbox').on('change', function(){
    var new_status = "completed";
    if(!$(this).is(':checked')){
      new_status = "reopened" ;
    }

    $.ajax({ 
      url: "/projects/" + $(this).data('project') + "/todos/" + $(this).data('todo') + "/complete",
      type: 'PUT',
      data: {"status": new_status }
    });
  });

  $("#todo_form").hide();
  $("textarea").autogrow();

  $("#add_new_todo").click(function(){
    $("#add_new_todo").hide();
    $("#todo_form").show();
    return false;
  });

  $(".btn-cancel-todo").click(function(){
    $("#todo_content").removeClass("error");
    $("#add_new_todo").show();
    $("#todo_form").hide();
    return false;
  });


});
